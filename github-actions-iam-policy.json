{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "LambdaManagement",
			"Effect": "Allow",
			"Action": [
				"lambda:ListFunctions",
				"lambda:CreateFunction",
				"lambda:UpdateFunctionCode",
				"lambda:UpdateFunctionConfiguration",
				"lambda:GetFunction",
				"lambda:DeleteFunction",
				"lambda:AddPermission",
				"lambda:RemovePermission",
				"lambda:GetPolicy",
        "lambda:ListVersionsByFunction",
        "lambda:GetFunctionCodeSigningConfig"
			],
			"Resource": [
				"arn:aws:lambda:us-east-1:*:function:danny-ecfr-*"
			]
		},
		{
			"Sid": "ListLambdaFunctions",
			"Effect": "Allow",
			"Action": [
				"lambda:ListFunctions"
			],
			"Resource": [
				"arn:aws:lambda:us-east-1:*:*:*"
			]
		},
		{
			"Sid": "APIGatewayManagement",
			"Effect": "Allow",
			"Action": [
				"apigateway:GET",
				"apigateway:POST",
				"apigateway:PUT",
				"apigateway:DELETE",
				"apigateway:PATCH"
			],
			"Resource": [
				"arn:aws:apigateway:us-east-1::/apis",
				"arn:aws:apigateway:us-east-1::/apis/*"
			]
		},
		{
			"Sid": "DynamoDBManagement",
			"Effect": "Allow",
			"Action": [
				"dynamodb:CreateTable",
				"dynamodb:DescribeTable",
				"dynamodb:UpdateTable",
				"dynamodb:DeleteTable",
				"dynamodb:ListTables",
				"dynamodb:TagResource",
				"dynamodb:UntagResource",
				"dynamodb:ListTagsOfResource",
				"dynamodb:DescribeContinuousBackups",
				"dynamodb:DescribeTimeToLive"
			],
			"Resource": [
				"arn:aws:dynamodb:us-east-1:*:table/danny-ecfr-*"
			]
		},
		{
			"Sid": "IAMRoleManagement",
			"Effect": "Allow",
			"Action": [
				"iam:CreateRole",
				"iam:GetRole",
				"iam:DeleteRole",
				"iam:UpdateRole",
				"iam:PutRolePolicy",
				"iam:GetRolePolicy",
				"iam:DeleteRolePolicy",
				"iam:AttachRolePolicy",
				"iam:DetachRolePolicy",
				"iam:ListRolePolicies",
				"iam:ListAttachedRolePolicies",
				"iam:PassRole"
			],
			"Resource": [
				"arn:aws:iam::*:role/danny-ecfr-*"
			]
		},
		{
			"Sid": "CloudWatchLogsManagement",
			"Effect": "Allow",
			"Action": [
				"logs:CreateLogGroup",
				"logs:DescribeLogGroups",
				"logs:DeleteLogGroup",
				"logs:PutRetentionPolicy",
				"logs:TagLogGroup",
				"logs:UntagLogGroup",
				"logs:ListTagsLogGroup"
			],
			"Resource": [
				"arn:aws:logs:us-east-1:*:log-group:/aws/lambda/danny-ecfr-*"
			]
		},
		{
			"Sid": "TerraformStateManagement",
			"Effect": "Allow",
			"Action": [
				"s3:GetObject",
				"s3:PutObject",
				"s3:DeleteObject",
				"s3:ListBucket"
			],
			"Resource": [
				"arn:aws:s3:::tf-state-bucket-danny-ecfr",
				"arn:aws:s3:::tf-state-bucket-danny-ecfr/*",
				"arn:aws:s3:::tf-state-bucket-danny-ecfr/ecfr-analysis",
				"arn:aws:s3:::tf-state-bucket-danny-ecfr/ecfr-analysis/*"
			]
		},
		{
			"Sid": "TerraformStateLocking",
			"Effect": "Allow",
			"Action": [
				"dynamodb:GetItem",
				"dynamodb:PutItem",
				"dynamodb:DeleteItem"
			],
			"Resource": [
				"arn:aws:dynamodb:us-east-1:*:table/terraform-state-lock"
			]
		}
	]
}